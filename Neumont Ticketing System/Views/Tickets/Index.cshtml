@using Neumont_Ticketing_System.Views.Tickets;
@using System.Globalization;
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Ticket Manager</h1>

<div class="ticketList">
    <div class="tableHeader">
        <div class="tableHeaderTextContainer">
            <p class="tableText tableHeaderText">
                Owner's Name
            </p>
            <p class="tableText tableHeaderText">
                Asset Serial
            </p>
            <p class="tableText tableHeaderText">
                Loaner
            </p>
            <p class="tableText tableHeaderText">
                Repair Name
            </p>
            <p class="tableText tableHeaderText">
                Date Opened
            </p>
        </div>
    </div>
    <div class="tableBody">
        @foreach(TicketEntry ticket in Model.Tickets)
        {
        <div class="tableRow">
            <p class="tableText tableBodyText ownerName">
                <span title="@(ticket.OwnerPreferredName)">
                    @(ticket.OwnerName)
                </span>
            </p>
            <p class="tableText tableBodyText assetSerial">@(ticket.AssetSerial)</p>
            @if (ticket.PrimaryLoanerName != null)
            {
                <p class="tableText tableBodyText loanerName">@(ticket.PrimaryLoanerName)</p>
            }
            else
            {
                <p class="tableText tableBodyText loanerName">None</p>
            }
            <p class="tableText tableBodyText repairName">@(ticket.RepairName)</p>
            <p class="tableText tableBodyText dateOpened">
                <span title="@(ticket.DateOpened.ToString(new CultureInfo("en-us")))">
                    @(ticket.DateOpened.ToString("d"))
                </span>
            </p>
        </div>
        }
    </div>
</div>